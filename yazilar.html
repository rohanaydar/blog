---
layout: default
title: Tüm Yazılar
description: Tüm blog yazılarını kategori, tarih ve okuma süresine göre filtreleyin.
---

<section class="page-hero">
    <div class="page-hero-container">
        <h1 class="page-hero-title">Tüm Yazılar</h1>
        <p class="page-hero-subtitle">Köklü düşünceler, modern yaklaşımlar. Toplam <span id="totalPosts">{{ site.posts | size }}</span> yazı.</p>
    </div>
</section>

<section class="filters-section">
    <div class="filters-container">
        <!-- Arama Çubuğu -->
        <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="searchInput" placeholder="Başlık veya içerikte ara..." class="search-input">
            <button id="clearSearch" class="clear-search-btn" title="Aramayı temizle">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Kategori Filtreleri -->
        <div class="categories-filter">
            <div class="filter-header">
                <h3><i class="fas fa-filter"></i> Kategoriler</h3>
                <button id="clearFilters" class="clear-filters-btn">Tümünü Göster</button>
            </div>
            
            <div class="category-buttons">
                <button class="category-btn active" data-category="all">Tümü</button>
                <button class="category-btn" data-category="tarih">Tarih</button>
                <button class="category-btn" data-category="dil">Dil</button>
                <button class="category-btn" data-category="insan">İnsan</button>
                <button class="category-btn" data-category="bilim">Bilim</button>
                <button class="category-btn" data-category="kuran">Kuran Tefsiri</button>
                <button class="category-btn" data-category="din">Din</button>
                <button class="category-btn" data-category="ekonomi">Ekonomi</button>
                <button class="category-btn" data-category="felsefe">Felsefe</button>
                <button class="category-btn" data-category="mezopotamya">Mezopotamya</button>
                <button class="category-btn" data-category="seyahat">Seyahat</button>
                <button class="category-btn" data-category="hikaye">Kısa Hikayeler</button>
            </div>
        </div>
        
        <!-- Sıralama -->
        <div class="sorting-options">
            <label for="sortSelect"><i class="fas fa-sort-amount-down"></i> Sırala:</label>
            <select id="sortSelect" class="sort-select">
                <option value="newest">En yeni</option>
                <option value="oldest">En eski</option>
                <option value="title-asc">Başlık (A-Z)</option>
                <option value="title-desc">Başlık (Z-A)</option>
            </select>
        </div>
    </div>
</section>

<main class="all-posts-main">
    <div class="all-posts-container">
        <!-- Yazılar buraya JavaScript ile eklenecek -->
        <div class="posts-grid" id="postsGrid">
            <!-- Örnek yazılar yüklenecek -->
        </div>
        
        <!-- Yükleme Göstergesi -->
        <div class="loading-indicator" id="loadingIndicator">
            <div class="loading-spinner"></div>
            <p>Daha fazla yazı yükleniyor...</p>
        </div>
        
        <!-- Sonuç Bulunamadı -->
        <div class="no-results" id="noResults" style="display: none;">
            <i class="fas fa-search fa-3x"></i>
            <h3>Hiç yazı bulunamadı</h3>
            <p>Arama kriterlerinize uygun yazı bulunamadı. Lütfen farklı bir kategori seçin veya arama teriminizi değiştirin.</p>
            <button id="resetFilters" class="cta-btn">Tüm Yazıları Göster</button>
        </div>
        
        <!-- Tüm Yazılar Yüklendi -->
        <div class="end-of-posts" id="endOfPosts" style="display: none;">
            <i class="fas fa-flag-checkered fa-2x"></i>
            <p>Tüm yazıları görüntülüyorsunuz.</p>
        </div>
    </div>
</main>

<script>
    // ===== YAZILAR VERİSİ =====
    const allPosts = [
        {% for post in site.posts %}
        {
            id: {{ forloop.index }},
            title: "{{ post.title | escape }}",
            excerpt: "{{ post.excerpt | strip_html | truncate: 150 | escape }}",
            categories: {{ post.categories | jsonify }},
            date: "{{ post.date | date: '%Y-%m-%d' }}",
            readTime: "{{ post.readTime }}",
            link: "{{ post.url | relative_url }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
    ];

    // ===== DEĞİŞKENLER =====
    let currentPage = 1;
    const postsPerPage = 20;
    let currentCategory = 'all';
    let currentSearch = '';
    let currentSort = 'newest';
    let isLoading = false;
    let allPostsLoaded = false;

    // ===== DOM ELEMENTLERİ =====
    const postsGrid = document.getElementById('postsGrid');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const noResults = document.getElementById('noResults');
    const endOfPosts = document.getElementById('endOfPosts');
    const searchInput = document.getElementById('searchInput');
    const clearSearchBtn = document.getElementById('clearSearch');
    const categoryButtons = document.querySelectorAll('.category-btn');
    const clearFiltersBtn = document.getElementById('clearFilters');
    const sortSelect = document.getElementById('sortSelect');
    const resetFiltersBtn = document.getElementById('resetFilters');
    const totalPostsSpan = document.getElementById('totalPosts');

    // ===== YARDIMCI FONKSİYONLAR =====
    function formatDate(dateStr) {
        const date = new Date(dateStr);
        return date.toLocaleDateString('tr-TR', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        });
    }

    function getCategoryName(categoryKey) {
        const categoryMap = {
            'tarih': 'Tarih',
            'dil': 'Dil',
            'insan': 'İnsan',
            'bilim': 'Bilim',
            'kuran': 'Kuran Tefsiri',
            'din': 'Din',
            'ekonomi': 'Ekonomi',
            'felsefe': 'Felsefe',
            'mezopotamya': 'Mezopotamya',
            'seyahat': 'Seyahat',
            'hikaye': 'Kısa Hikayeler'
        };
        return categoryMap[categoryKey] || categoryKey;
    }

    function sortPosts(posts, sortType) {
        const sorted = [...posts];
        switch(sortType) {
            case 'newest':
                return sorted.sort((a, b) => new Date(b.date) - new Date(a.date));
            case 'oldest':
                return sorted.sort((a, b) => new Date(a.date) - new Date(b.date));
            case 'title-asc':
                return sorted.sort((a, b) => a.title.localeCompare(b.title, 'tr'));
            case 'title-desc':
                return sorted.sort((a, b) => b.title.localeCompare(a.title, 'tr'));
            default:
                return sorted;
        }
    }

    function filterPosts() {
        let filtered = allPosts;
        
        // Kategori filtreleme
        if (currentCategory !== 'all') {
            filtered = filtered.filter(post => 
                post.categories && post.categories.some(cat => 
                    cat.toLowerCase() === currentCategory.toLowerCase()
                )
            );
        }
        
        // Arama filtreleme
        if (currentSearch.trim() !== '') {
            const searchTerm = currentSearch.toLowerCase();
            filtered = filtered.filter(post => 
                post.title.toLowerCase().includes(searchTerm) || 
                post.excerpt.toLowerCase().includes(searchTerm) ||
                (post.categories && post.categories.some(cat => 
                    getCategoryName(cat).toLowerCase().includes(searchTerm)
                ))
            );
        }
        
        // Sıralama
        filtered = sortPosts(filtered, currentSort);
        
        return filtered;
    }

    function renderPosts() {
        const filteredPosts = filterPosts();
        const startIndex = 0;
        const endIndex = currentPage * postsPerPage;
        const postsToShow = filteredPosts.slice(startIndex, endIndex);
        
        // Eğer filtreleme sonucu yazı yoksa
        if (filteredPosts.length === 0) {
            postsGrid.innerHTML = '';
            noResults.style.display = 'block';
            loadingIndicator.style.display = 'none';
            endOfPosts.style.display = 'none';
            return;
        } else {
            noResults.style.display = 'none';
        }
        
        // Yazıları render et
        if (currentPage === 1) {
            postsGrid.innerHTML = '';
        }
        
        postsToShow.forEach(post => {
            const postElement = document.createElement('article');
            postElement.className = 'all-post-card';
            
            let categoriesHTML = '';
            if (post.categories && post.categories.length > 0) {
                categoriesHTML = post.categories.map(cat => 
                    `<span class="all-post-category" style="background-color: rgba(46, 79, 47, 0.15); color: #4B8763;">${getCategoryName(cat)}</span>`
                ).join('');
            }
            
            postElement.innerHTML = `
                <div class="all-post-meta">
                    ${categoriesHTML}
                    <time class="all-post-date">${formatDate(post.date)}</time>
                </div>
                <h3 class="all-post-title">
                    <a href="${post.link}">${post.title}</a>
                </h3>
                <p class="all-post-excerpt">${post.excerpt}</p>
                <div class="all-post-footer">
                    <a href="${post.link}" class="all-post-read-more">Devamını Oku <i class="fas fa-arrow-right"></i></a>
                    <span class="all-post-read-time"><i class="far fa-clock"></i> ${post.readTime} dk</span>
                </div>
            `;
            postsGrid.appendChild(postElement);
        });
        
        // Tüm yazılar yüklendi mi kontrol et
        if (postsToShow.length >= filteredPosts.length) {
            allPostsLoaded = true;
            endOfPosts.style.display = 'block';
            loadingIndicator.style.display = 'none';
        } else {
            allPostsLoaded = false;
            endOfPosts.style.display = 'none';
            loadingIndicator.style.display = 'flex';
        }
    }

    function loadMorePosts() {
        if (isLoading || allPostsLoaded) return;
        
        isLoading = true;
        loadingIndicator.style.opacity = '1';
        
        // Simüle edilmiş yükleme gecikmesi
        setTimeout(() => {
            currentPage++;
            renderPosts();
            isLoading = false;
            loadingIndicator.style.opacity = '0.7';
        }, 800);
    }

    function resetFilters() {
        currentPage = 1;
        currentCategory = 'all';
        currentSearch = '';
        currentSort = 'newest';
        
        searchInput.value = '';
        sortSelect.value = 'newest';
        
        // Tüm kategori butonlarını güncelle
        categoryButtons.forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.category === 'all') {
                btn.classList.add('active');
            }
        });
        
        renderPosts();
    }

    // ===== OLAYLARI DİNLEME =====
    // Kategori butonları
    categoryButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            categoryButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            currentPage = 1;
            currentCategory = btn.dataset.category;
            renderPosts();
        });
    });

    // Arama
    searchInput.addEventListener('input', (e) => {
        currentPage = 1;
        currentSearch = e.target.value;
        renderPosts();
        
        // Temizle butonunu göster/gizle
        if (currentSearch.trim() !== '') {
            clearSearchBtn.style.display = 'flex';
        } else {
            clearSearchBtn.style.display = 'none';
        }
    });

    // Arama temizleme
    clearSearchBtn.addEventListener('click', () => {
        searchInput.value = '';
        currentSearch = '';
        clearSearchBtn.style.display = 'none';
        currentPage = 1;
        renderPosts();
    });

    // Tüm filtreleri temizle
    clearFiltersBtn.addEventListener('click', resetFilters);
    resetFiltersBtn.addEventListener('click', resetFilters);

    // Sıralama
    sortSelect.addEventListener('change', (e) => {
        currentPage = 1;
        currentSort = e.target.value;
        renderPosts();
    });

    // Sonsuz kaydırma
    window.addEventListener('scroll', () => {
        const { scrollTop, scrollHeight, clientHeight } = document.documentElement;
        
        if (scrollTop + clientHeight >= scrollHeight - 100) {
            loadMorePosts();
        }
    });

    // ===== SAYFA YÜKLENDİĞİNDE =====
    document.addEventListener('DOMContentLoaded', () => {
        renderPosts();
    });
</script>
